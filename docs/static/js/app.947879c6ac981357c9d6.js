webpackJsonp([1],{"/h01":function(e,t){},"7qAo":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),n=a("Dd8w"),i=a.n(n),r=a("NYxO"),c={name:"navBar",computed:i()({},Object(r.d)(["searchKeyword"]),{keyword:{get:function(){return this.searchKeyword},set:function(e){this.$store.commit("UPDATE_SEARCH_KEYWORD",e)}}}),methods:{composition:function(e){this.$store.commit("UPDATE_SEARCH_KEYWORD",e.data)},clearKeyword:function(){""!=this.searchKeyword&&this.$store.commit("CLEAR_SEARCH_KEYWORD")}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"navBar"}},[a("div",{staticClass:"container"},[a("h2",[e._v("YouBike")]),a("div",{staticClass:"serachBar"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],attrs:{type:"text"},domProps:{value:e.keyword},on:{compositionstart:function(t){e.composition(t)},compositionupdate:function(t){e.composition(t)},compositionend:function(t){e.composition(t)},input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),a("span",{staticClass:"searchIcon"},[a("i",{staticClass:"fas",class:""==e.searchKeyword?"fa-search":"fa-times",on:{click:e.clearKeyword}})])])])])},staticRenderFns:[]};var o={components:{navBar:a("VU/8")(c,l,!1,function(e){a("/h01")},null,null).exports},mounted:function(){var e=this;this.$store.dispatch("getOriData"),setInterval(function(){e.$store.dispatch("getOriData"),console.log("data updated")},6e4)}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"App"}},[t("navBar"),this.$store.state.isLoading?t("p",[this._v("LODAING")]):this._e(),t("router-view")],1)},staticRenderFns:[]};var d=a("VU/8")(o,u,!1,function(e){a("yGmm")},null,null).exports,g=a("/ocq"),_={name:"bikeCard",props:{bike:{type:Object,required:!0}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bikeCard"},[a("article",{staticClass:"cardContainer"},[0==e.bike.sna?a("div",{staticClass:"disableMask"}):e._e(),a("div",{staticClass:"titleBody"},[a("div",{staticClass:"title"},[e._v(e._s(e.bike.sna))]),a("div",{staticClass:"title_en"},[e._v(e._s(e.bike.snaen))])]),a("div",{staticClass:"districtBody"},[a("div",{staticClass:"district"},[e._v(e._s(e.bike.sarea)),a("small",{staticClass:"district_en"},[e._v(e._s(e.bike.sareaen))])])]),a("div",{staticClass:"addressBody"},[a("div",{staticClass:"address"},[e._v(e._s(e.bike.ar))]),a("div",{staticClass:"address_en"},[e._v(e._s(e.bike.aren))])]),a("div",{staticClass:"statusBody"},[a("div",{staticClass:"leftNum"},[a("div",{staticClass:"leftTitle"},[e._v("可租借")]),a("span",{staticClass:"num"},[e._v(e._s(e.bike.sbi))])]),a("div",{staticClass:"vacancyNum"},[a("div",{staticClass:"vacancyTitle"},[e._v("可歸還")]),a("span",{staticClass:"num"},[e._v(e._s(e.bike.bemp))])])])])])},staticRenderFns:[]};var h=a("VU/8")(_,f,!1,function(e){a("jibe")},null,null).exports,p={name:"filterPannel",props:{isOpen:{type:Boolean,required:!0}},computed:i()({},Object(r.d)(["areaList","rentable","returnable","totalLength"]),Object(r.b)(["selectedTags"]),{selectedList:function(){return this.areaList.filter(function(e){return e.isSelected})},setRentable:{get:function(){return this.rentable},set:function(e){this.UPDATE_RENTABLE()}},setReturnable:{get:function(){return this.returnable},set:function(e){this.UPDATE_RETURNBLE()}}}),methods:i()({},Object(r.c)(["UPDATE_RENTABLE","UPDATE_RETURNBLE","UPDATE_FILTER_TAGS","CLEAR_ALL_TAGS"]))},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"filterPannel",class:{isOpen:e.isOpen}},[a("div",{staticClass:"filterContainer"},[a("div",{staticClass:"areaListContainer"},[a("div",{staticClass:"areaTitle"},[e._v("地區選擇"),a("span",{staticClass:"areaTotal"},[e._v("共有 "),a("span",{staticClass:"totalNum"},[e._v(e._s(e.totalLength))]),e._v(" 站點")])]),a("div",{staticClass:"areaBody"},e._l(e.areaList,function(t){return a("div",{staticClass:"areaList"},[a("label",{on:{click:function(a){a.stopPropagation(),e.UPDATE_FILTER_TAGS(t)}}},[a("i",{staticClass:"far",class:t.isSelected?"fa-check-circle":"fa-circle"}),a("span",{staticClass:"eachAreaTitle"},[e._v(e._s(t.name_zh))]),a("i",{staticClass:"eachAreaCounts"},[e._v(e._s(t.length))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.isSelected,expression:"area.isSelected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isSelected)?e._i(t.isSelected,null)>-1:t.isSelected},on:{click:function(e){e.stopPropagation()},change:function(a){var s=t.isSelected,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=e._i(s,null);n.checked?r<0&&e.$set(t,"isSelected",s.concat([null])):r>-1&&e.$set(t,"isSelected",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(t,"isSelected",i)}}})])])}))]),a("div",{staticClass:"statusContainer"},[a("div",{staticClass:"statusTitle"},[e._v("狀態")]),a("div",{staticClass:"statusBody"},[a("div",{staticClass:"statusList"},[a("label",[a("i",{staticClass:"far",class:e.setRentable?"fa-check-circle":"fa-circle"}),a("span",[e._v("可租借")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.setRentable,expression:"setRentable"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.setRentable)?e._i(e.setRentable,null)>-1:e.setRentable},on:{change:function(t){var a=e.setRentable,s=t.target,n=!!s.checked;if(Array.isArray(a)){var i=e._i(a,null);s.checked?i<0&&(e.setRentable=a.concat([null])):i>-1&&(e.setRentable=a.slice(0,i).concat(a.slice(i+1)))}else e.setRentable=n}}})])]),a("div",{staticClass:"statusList"},[a("label",[a("i",{staticClass:"far",class:e.setReturnable?"fa-check-circle":"fa-circle"}),a("span",[e._v("可歸還")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.setReturnable,expression:"setReturnable"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.setReturnable)?e._i(e.setReturnable,null)>-1:e.setReturnable},on:{change:function(t){var a=e.setReturnable,s=t.target,n=!!s.checked;if(Array.isArray(a)){var i=e._i(a,null);s.checked?i<0&&(e.setReturnable=a.concat([null])):i>-1&&(e.setReturnable=a.slice(0,i).concat(a.slice(i+1)))}else e.setReturnable=n}}})])])])]),a("div",{staticClass:"clearAllTagsContainer",class:{disable:0==e.selectedTags.length},on:{click:e.CLEAR_ALL_TAGS}},[a("a",{staticClass:"clearTags"},[e._v("取消篩選")])])])])},staticRenderFns:[]};var m=a("VU/8")(p,v,!1,function(e){a("7qAo")},null,null).exports,b={name:"pagination",computed:i()({},Object(r.d)(["pageData"])),methods:{updatePage:function(e){this.$store.commit("CHANGE_PAGE",e)}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"pagination"}},[a("ul",[a("li",{class:{active:1==e.pageData.currentPage},on:{click:function(t){e.updatePage(1)}}},[a("a",[e._v("1")])]),e.pageData.currentPage>=5&&e.pageData.totalPage>8?a("li",[e._m(0)]):e._e(),e._l(e.pageData.totalPage,function(t){return 1!=t&&t!=e.pageData.totalPage&&(e.pageData.totalPage>8&&e.pageData.currentPage-t<=2&&t-e.pageData.currentPage<=2||t<=6&&e.pageData.currentPage<=4||e.pageData.totalPage-t<=5&&e.pageData.totalPage-e.pageData.currentPage<=3)?a("li",{class:{active:e.pageData.currentPage==t},on:{click:function(a){e.updatePage(t)}}},[a("a",[e._v(e._s(t))])]):e._e()}),e.pageData.totalPage-e.pageData.currentPage>3&&e.pageData.totalPage>=8?a("li",[e._m(1)]):e._e(),1!==e.pageData.totalPage?a("li",{class:{active:e.pageData.currentPage==e.pageData.totalPage},on:{click:function(t){e.updatePage(e.pageData.totalPage)}}},[a("a",[e._v(e._s(e.pageData.totalPage))])]):e._e()],2)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",[t("i",{staticClass:"fas fa-ellipsis-h"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",[t("i",{staticClass:"fas fa-ellipsis-h"})])}]};var C={name:"homePage",components:{bikeCard:h,filterPannel:m,pagination:a("VU/8")(b,D,!1,function(e){a("XT2W")},null,null).exports},data:function(){return{showMobileMenu:!1}},methods:i()({},Object(r.c)(["DELETE_TAG"]),{updateMobileMenu:function(){this.showMobileMenu=!this.showMobileMenu}}),computed:i()({},Object(r.b)(["filteredData","selectedTags"]))},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"homePage"}},[a("div",{staticClass:"homeContainer container"},[a("filterPannel",{attrs:{"is-open":e.showMobileMenu}}),a("div",{staticClass:"mobileMenuBtn",class:{isOpen:e.showMobileMenu},on:{click:e.updateMobileMenu}},[a("i",{staticClass:"fas",class:e.showMobileMenu?"fa-times":"fa-bars"})]),a("div",{staticClass:"bikeCard-container row"},[0==e.filteredData.length?a("p",{staticClass:"empty_text"},[e._v("嘿～沒有腳踏車想讓你騎喔！")]):e._e(),0!=e.filteredData.length?a("div",{staticClass:"filterTagContainer col-md-12"},[0==e.selectedTags.length?a("div",{staticClass:"filterDefault"},[e._v("你可以選擇地區！")]):e._l(e.selectedTags,function(t){return a("div",{staticClass:"filterTag",on:{click:function(a){e.DELETE_TAG(t)}}},[a("div",{staticClass:"tagBody"},[a("div",{staticClass:"tagTitle"},[e._v(e._s(t.name_zh)),a("span",{staticClass:"tagTitle_en"},[e._v(e._s(t.name_en))])]),e._m(0,!0)])])})],2):e._e(),e._l(e.filteredData,function(e){return a("bikeCard",{key:e.sno,staticClass:"col-md-6",attrs:{bike:e}})}),0!=e.filteredData.length?a("pagination"):e._e()],2)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"deleteTag"},[t("i",{staticClass:"fas fa-times"})])}]};var E=a("VU/8")(C,A,!1,function(e){a("xY4C")},null,null).exports;s.default.use(g.a);var T=new g.a({routes:[{path:"/",name:"homePage",component:E},{path:"*",redirect:"/"}]}),P=a("zL8q"),R=a.n(P),S=(a("tvR6"),a("mvHQ")),k=a.n(S),y=a("mtWM"),L=a.n(y);a("Ya8g");s.default.use(r.a);var w=new r.a.Store({state:{areaList:[{isSelected:!1,name_en:"Xinyi Dist.",name_zh:"信義區",length:0},{isSelected:!1,name_en:"Daan Dist.",name_zh:"大安區",length:0},{isSelected:!1,name_en:"Zhongshan Dist.",name_zh:"中山區",length:0},{isSelected:!1,name_en:"Songshan Dist.",name_zh:"松山區",length:0},{isSelected:!1,name_en:"Nangang Dist.",name_zh:"南港區",length:0},{isSelected:!1,name_en:"Zhongzheng Dist.",name_zh:"中正區",length:0},{isSelected:!1,name_en:"Wanhua Dist.",name_zh:"萬華區",length:0},{isSelected:!1,name_en:"Wenshan Dist.",name_zh:"文山區",length:0},{isSelected:!1,name_en:"Datong Dist.",name_zh:"大同區",length:0},{isSelected:!1,name_en:"Shilin Dist.",name_zh:"士林區",length:0},{isSelected:!1,name_en:"Neihu Dist.",name_zh:"內湖區",length:0},{isSelected:!1,name_en:"Beitou Dist.",name_zh:"北投區",length:0}],isLoading:!0,searchKeyword:"",originalData:[],pageData:{pageStart:1,currentPage:1,pageSize:10,totalPage:0},totalLength:0,rentable:!1,rentableAmount:1,returnable:!1,returnableAmount:1},getters:{selectedTags:function(e){return e.areaList.filter(function(e){return e.isSelected})},filteredData:function(e){var t=[];t=""===e.originalData?e.originalData:e.originalData.filter(function(t){var a=k()(t),s=e.searchKeyword.split(" ").join("|");if(null!==a.match(new RegExp(s,"i")))return!0}),e.areaList.forEach(function(e){var a=0;t.forEach(function(t){t.sarea===e.name_zh&&a++}),e.length=a}),t=0==w.getters.selectedTags.length?t:t.filter(function(e){return w.getters.selectedTags.some(function(t){return t.name_zh==e.sarea})}),t=e.rentable?t.filter(function(e){return e.sbi>0}):t,t=e.returnable?t.filter(function(e){return e.bemp>0}):t,e.pageData.totalPage=Math.ceil(t.length/e.pageData.pageSize),e.totalLength=t.length;var a=(e.pageData.currentPage-1)*e.pageData.pageSize,s=a+e.pageData.pageSize;return t.slice(a,s)}},mutations:{UPDATE_ORIGINAL_DATA:function(e,t){e.originalData=t,e.isLoading=!1},UPDATE_SEARCH_KEYWORD:function(e,t){e.searchKeyword=t,e.pageData.currentPage=1},CLEAR_SEARCH_KEYWORD:function(e){e.searchKeyword="",e.pageData.currentPage=1},CHANGE_PAGE:function(e,t){e.pageData.currentPage=t,w.dispatch("scrollToTop")},UPDATE_FILTER_TAGS:function(e,t){t.isSelected=!t.isSelected,e.pageData.currentPage=1,w.dispatch("scrollToTop")},DELETE_TAG:function(e,t){t.isSelected=!t.isSelected,e.pageData.currentPage=1},CLEAR_ALL_TAGS:function(e){e.areaList.forEach(function(e){return e.isSelected=!1}),e.pageData.currentPage=1},UPDATE_RENTABLE:function(e){e.rentable=!e.rentable},UPDATE_RETURNBLE:function(e){e.returnable=!e.returnable}},actions:{getOriData:function(e){var t=e.commit;L.a.get("https://tcgbusfs.blob.core.windows.net/blobyoubike/YouBikeTP.gz").then(function(e){var a=[],s=e.data.retVal;for(var n in s)a.push(s[n]);t("UPDATE_ORIGINAL_DATA",a)})},scrollToTop:function(){var e=window.scrollY,t=Math.PI/(500/15),a=e/2,s=0,n=void 0,i=setInterval(function(){0!=window.scrollY?(s+=1,n=a-a*Math.cos(s*t),window.scrollTo(0,e-n)):clearInterval(i)},15)}}});a("SSNS"),a("K3J8");s.default.use(R.a),s.default.config.productionTip=!1,new s.default({el:"#app",render:function(e){return e(d)},router:T,store:w,components:{App:d},template:"<App/>"})},SSNS:function(e,t){},XT2W:function(e,t){},jibe:function(e,t){},tvR6:function(e,t){},xY4C:function(e,t){},yGmm:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.947879c6ac981357c9d6.js.map